(()=>{"use strict";var e={2789:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{Z:()=>s});var n=r(5893),o=r(8106),a=r(9506),l=e([a]);a=(l.then?(await l)():l)[0];let s=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(a.Z,{})});i()}catch(e){i(e)}})},737:function(e,t,r){r.d(t,{Q:()=>i});let i={success:"success",error:"error"}},2287:function(e,t,r){r.d(t,{D:()=>i});let i={prompt:`Your task is to extract and structure the following glasses prescription information into a specific JSON format.
The prescription is usually written in French, but can be from France or Belgium; if there is another language, fallback to it.
Respond only with a valid JSON object conforming to the provided format.

### Input Language:
French (primary)
English (secondary)
Any other (fallback)

### Notes:
- The full correction lines (OD, OS, OU) often contain Sphere/Cylinder/Axis/Add values. Parse both the full line and individual components.
- The booleans VL, VP, VA indicate if the prescription includes corrections for distance vision, near vision, or pediatric vision.
- If only OU (both eyes) is provided, extract the values and duplicate them into both the left and right eye fields.
- If a field is not available, just omit it.
- Handle ambiguities or unreadable text by making reasonable assumptions or noting the uncertainty.

Now parse the following prescription.
  `,schemaFile:new File([JSON.stringify(JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"Prescription","description":"Schema for structuring glasses prescription information.","type":"object","properties":{"patient":{"type":"object","description":"Information about the patient.","properties":{"name":{"type":"string","description":"Patient\'s first name."},"surname":{"type":"string","description":"Patient\'s last name."},"age":{"type":"number","nullable":true,"description":"Patient\'s age in years. Null if not provided."}},"required":["name","surname"]},"prescriber":{"type":"object","description":"Information about the prescriber.","properties":{"doctorFullname":{"type":"string","description":"Full name of the doctor."},"organization":{"type":["string","null"],"description":"Clinic or hospital name. Optional."}},"required":["doctorFullname"]},"dates":{"type":"object","description":"Dates related to the prescription.","properties":{"prescripted":{"type":["string","null"],"format":"date","description":"Prescription date."},"expiryDate":{"type":["string","null"],"format":"date","description":"Expiry date of the prescription."}},"required":["prescripted","expiryDate"]},"corrections":{"type":"object","description":"Correction details for the glasses prescription.","properties":{"vision":{"type":"string","enum":["VL","VP","VA"],"description":"Vision type: VL (Distance), VP (Near), VA (Pediatric)."},"VL":{"type":"boolean","description":"Distance vision (EN: Distance vision, FR: Vision de loin)."},"VP":{"type":"boolean","description":"Near vision (EN: Near vision, FR: Vision de pr\xe8s)."},"VA":{"type":"boolean","description":"Pediatric vision (EN: Pediatric vision, FR: Vision de lâ€™enfant)."},"OD":{"type":["string","null"],"description":"Full correction line for right eye."},"OS":{"type":["string","null"],"description":"Full correction line for left eye."},"OU":{"type":["string","null"],"description":"Full correction line for both eyes, if present."},"rightSphere":{"type":["string","null"],"description":"Spherical value for right eye."},"rightCylinder":{"type":["string","null"],"description":"Cylinder value for right eye."},"rightAxe":{"type":["string","null"],"description":"Axis for right eye."},"rightAdd":{"type":["string","null"],"description":"Additional correction (ADD) for right eye."},"rightDeg":{"type":["string","null"],"description":"Degree value or rotation for right eye."},"rightPrism":{"type":["string","null"],"description":"Prism value for right eye."},"rightBase":{"type":["string","null"],"description":"Base direction for right eye."},"rightPD":{"type":["string","null"],"description":"Pupillary distance for right eye."},"leftSphere":{"type":["string","null"],"description":"Spherical value for left eye."},"leftCylinder":{"type":["string","null"],"description":"Cylinder value for left eye."},"leftAxe":{"type":["string","null"],"description":"Axis for left eye."},"leftAdd":{"type":["string","null"],"description":"Additional correction (ADD) for left eye."},"leftDeg":{"type":["string","null"],"description":"Degree value or rotation for left eye."},"leftPrism":{"type":["string","null"],"description":"Prism value for left eye."},"leftBase":{"type":["string","null"],"description":"Base direction for left eye."},"leftPD":{"type":["string","null"],"description":"Pupillary distance for left eye."}},"required":["vision","VL","VP","VA"]}},"required":["patient","prescriber","dates","corrections"]}'))],"prescription-schema.json",{type:"application/json"}),targetFile:null}},9216:function(e,t,r){r.d(t,{E:()=>i});let i="mistral"},1523:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{P:()=>c});var n=r(737),o=r(4913),a=r(8071),l=r(4945),s=e([o]);o=(s.then?(await s)():s)[0];let c=async e=>{let{prompt:t,schemaFile:r,fileURL:i,targetFile:s}=e,c=(null==r?void 0:r.name)?await (0,l.m)(r):null,d=(null==s?void 0:s.name)?await (0,a.y)(s):i;if(!t||!d)return{status:n.Q.error,message:"Please provide all required data"};try{let e=await o.Z.getContentByFile({prompt:t,schema:c,file:d});if(!e)return{status:n.Q.error,message:"No data found"};return{status:n.Q.success,message:e}}catch(e){return{status:n.Q.error,message:e.message}}};i()}catch(e){i(e)}})},6092:function(e,t,r){r.d(t,{$:()=>p});var i=r(5893),n=r(7294),o=r(9719),a=r(7230),l=r(1035),s=r(9599),c=r(7454),d=r(1121);let u=e=>{let t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=e.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},p=e=>{let{defaultValue:t,setFile:r}=e,{files:p,fileInputRef:f,handleRemove:h}=(0,d.j)([t]);return(0,n.useEffect)(()=>{p.length?r(p[0]):r(null)},[p]),(0,i.jsxs)(o.Z,{direction:"row",spacing:2,marginBottom:2,children:[(0,i.jsxs)(a.Z,{component:"label",variant:"contained",tabIndex:-1,sx:{width:200,height:55},children:["Choose schema",(0,i.jsx)("input",{style:{display:"none"},type:"file",name:"schemaFile",accept:"application/json",ref:f})]}),null==p?void 0:p.map(e=>(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,i.jsx)("strong",{children:e.name}),(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(l.Z,{"aria-label":"delete",onClick:()=>u(e),color:"primary",children:(0,i.jsx)(s.Z,{})}),(0,i.jsx)(l.Z,{"aria-label":"delete",onClick:h(e),color:"primary",children:(0,i.jsx)(c.Z,{})})]})]},e.name))]})}},5861:function(e,t,r){r.d(t,{w:()=>u});var i=r(5893),n=r(7294),o=r(7230),a=r(1035),l=r(9719),s=r(483),c=r(7454),d=r(1121);let u=e=>{let{defaultValue:t,setFile:r}=e,{files:u,fileInputRef:p,handleRemove:f}=(0,d.j)(t?[t]:[]);return(0,n.useEffect)(()=>{u.length?r(u[0]):r(null)},[u]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,i.jsx)(s.Z,{fullWidth:!0,disabled:u.length,type:"url",name:"fileURL",label:"URL"}),(0,i.jsxs)(o.Z,{component:"label",variant:"contained",tabIndex:-1,sx:{width:200,height:55},children:["Choose file",(0,i.jsx)("input",{style:{display:"none"},type:"file",name:"targetFile",accept:"image/*,application/pdf",ref:p})]})]}),null==u?void 0:u.map(e=>(0,i.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,i.jsx)("strong",{children:e.name}),(0,i.jsx)(a.Z,{"aria-label":"delete",onClick:f(e),color:"primary",children:(0,i.jsx)(c.Z,{})})]},e.name))]})}},9506:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{Z:()=>g});var n=r(5893),o=r(9719),a=r(7884),l=r(483),s=r(7230),c=r(6881),d=r(7294),u=r(7245),p=r(1523),f=r(6092),h=r(5861),y=r(2287),m=e([p]);p=(m.then?(await m)():m)[0];let g=function(){let e,[t,r]=(0,d.useState)(!1),[i,m]=(0,d.useState)({status:"",message:""}),[g,v]=(0,d.useState)({prompt:y.D.prompt,fileURL:"",schemaFile:y.D.schemaFile,targetFile:y.D.targetFile}),b=e=>t=>{v({...g,[e]:t})},j=async e=>{e.preventDefault(),r(!0);let t=await (0,p.P)(g);m(t),r(!1)};return(0,n.jsxs)(o.Z,{paddingY:2,children:[(0,n.jsx)("h1",{children:"OCR AI Tool"}),(0,n.jsx)("form",{style:{marginBottom:20},onSubmit:j,children:(0,n.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(l.Z,{required:!0,fullWidth:!0,multiline:!0,defaultValue:g.prompt,name:"prompt",label:"Prompt",onChange:(e="prompt",t=>{v({...g,[e]:t.target.value})})}),(0,n.jsx)(f.$,{defaultValue:g.schemaFile,setFile:b("schemaFile")}),(0,n.jsx)(h.w,{defaultValue:g.targetFile,setFile:b("targetFile")}),(0,n.jsx)(s.Z,{variant:"contained",type:"submit",disabled:t,children:"Process"})]})}),t&&(0,n.jsx)(c.Z,{}),!t&&i.message&&(0,n.jsx)("div",{style:{backgroundColor:"#f8f8f8",padding:"10px 20px",borderRadius:5},children:i.message&&(0,n.jsx)(u.UG,{children:i.message})})]})};i()}catch(e){i(e)}})},1121:function(e,t,r){r.d(t,{j:()=>n});var i=r(7294);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=(0,i.useState)(e),n=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(t.length){let e=new DataTransfer;t.map(t=>e.items.add(t)),n.current.files=e.files}else n.current.value=""},[t]),(0,i.useEffect)(()=>{let e=n.current;return e.addEventListener("change",o),e.addEventListener("cancel",a),()=>{e.removeEventListener("change",o),e.removeEventListener("cancel",a)}},[]);let o=e=>{let t=e.target.files;t&&t.length>0?r(Array.from(t)):r([])},a=()=>{r([])};return{files:t,handleChange:o,handleRemove:e=>()=>{r(t.filter(t=>t.name!==e.name))},fileInputRef:n}}},7675:function(e,t,r){r.a(e,async function(e,t){try{var i=r(5893),n=r(7294),o=r(745),a=r(2789),l=e([a]);a=(l.then?(await l)():l)[0],o.createRoot(document.getElementById("root")).render((0,i.jsx)(n.StrictMode,{children:(0,i.jsx)(a.Z,{})})),t()}catch(e){t(e)}})},4913:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{Z:()=>l}),r(9216);var n=r(6333),o=e([n]);n=(o.then?(await o)():o)[0];let a={getContentByFile:(0,n.A)("mistral").getContentByFile};Object.freeze(a);let l=a;i()}catch(e){i(e)}})},6333:function(e,t,r){r.a(e,async function(e,i){try{r.d(t,{A:()=>n});let e={mistral:await Promise.all([r.e("885"),r.e("118")]).then(r.bind(r,9105))},n=t=>{if(!e[t])throw Error(`Strategy ${t} not found`);return e[t]};i()}catch(e){i(e)}},1)},8071:function(e,t,r){r.d(t,{y:()=>i});let i=e=>{let t=new FileReader;return new Promise((r,i)=>{t.readAsDataURL(e),t.onload=()=>r(t.result),t.onerror=e=>i(e)})}},4945:function(e,t,r){r.d(t,{m:()=>i});let i=async e=>{let t=new FileReader;return new Promise((r,i)=>{t.readAsText(e),t.onload=()=>r(t.result),t.onerror=e=>i(e)})}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},o=r=>r.map(r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var o=[];o.d=0,r.then(e=>{a[t]=e,n(o)},e=>{a[i]=e,n(o)});var a={};return a[e]=e=>e(o),a}}var l={};return l[e]=function(){},l[t]=r,l});r.a=(r,a,l)=>{l&&((s=[]).d=-1);var s,c,d,u,p=new Set,f=r.exports,h=new Promise((e,t)=>{u=t,d=e});h[t]=f,h[e]=e=>{s&&e(s),p.forEach(e),h.catch(function(){})},r.exports=h,a(r=>{c=o(r);var n,a=()=>c.map(e=>{if(e[i])throw e[i];return e[t]}),l=new Promise(t=>{(n=()=>t(a)).r=0;var r=e=>e!==s&&!p.has(e)&&(p.add(e),e&&!e.d&&(n.r++,e.push(n)));c.map(t=>t[e](r))});return n.r?l:a()},e=>(e?u(h[i]=e):d(f),n(s))),s&&s.d<0&&(s.d=0)}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(i,n){if(1&n&&(i=this(i)),8&n||"object"==typeof i&&i&&(4&n&&i.__esModule||16&n&&"function"==typeof i.then))return i;var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&i;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>{a[e]=()=>i[e]});return a.default=()=>i,r.d(o,a),o}})(),r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,i)=>(r.f[i](e,t),t),[])),r.u=e=>"static/js/async/"+e+"."+({118:"e41334c2",885:"a26860ff"})[e]+".js",r.miniCssF=e=>""+e+".css",r.h=()=>"ae35f616120b6b22",r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ocr-ai-tool:";r.l=function(i,n,o,a){if(e[i])return void e[i].push(n);if(void 0!==o)for(var l,s,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+o),l.src=i),e[i]=[n];var p=function(t,r){l.onerror=l.onload=null,clearTimeout(f);var n=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(function(e){return e(r)}),t)return t(r)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}})(),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];r.O=(t,i,n,o)=>{if(i){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[i,n,o];return}for(var l=1/0,a=0;a<e.length;a++){for(var[i,n,o]=e[a],s=!0,c=0;c<i.length;c++)(!1&o||l>=o)&&Object.keys(r.O).every(e=>r.O[e](i[c]))?i.splice(c--,1):(s=!1,o<l&&(l=o));if(s){e.splice(a--,1);var d=n();void 0!==d&&(t=d)}}return t}})(),r.p="./",r.rv=()=>"1.3.1",(()=>{var e={980:0};r.f.j=function(t,i){var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise((r,i)=>n=e[t]=[r,i]);i.push(n[2]=o);var a=r.p+r.u(t),l=Error();r.l(a,function(i){if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}},"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,i)=>{var n,o,[a,l,s]=i,c=0;if(a.some(t=>0!==e[t])){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(s)var d=s(r)}for(t&&t(i);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},i=self.webpackChunkocr_ai_tool=self.webpackChunkocr_ai_tool||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.ruid="bundler=rspack@1.3.1";var i=r.O(void 0,["361","771"],function(){return r(7675)});i=r.O(i)})();